<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Estimate hazard ratios — surv.HR • tteICE</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Estimate hazard ratios — surv.HR"><meta name="description" content="This function estimates the hazard ratio
for time-to event data under ICH E9 (R1) to address intercurrent events. Multiple
strategies except the principal stratum strategy are allowed."><meta property="og:description" content="This function estimates the hazard ratio
for time-to event data under ICH E9 (R1) to address intercurrent events. Multiple
strategies except the principal stratum strategy are allowed."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">tteICE</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/mephas/tteICE/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Estimate hazard ratios</h1>
      <small class="dont-index">Source: <a href="https://github.com/mephas/tteICE/blob/main/R/surv_HR.R" class="external-link"><code>R/surv_HR.R</code></a></small>
      <div class="d-none name"><code>surv.HR.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function estimates the hazard ratio
for time-to event data under ICH E9 (R1) to address intercurrent events. Multiple
strategies except the principal stratum strategy are allowed.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">surv.HR</span><span class="op">(</span></span>
<span>  <span class="va">A</span>,</span>
<span>  <span class="va">Time</span>,</span>
<span>  <span class="va">cstatus</span>,</span>
<span>  strategy <span class="op">=</span> <span class="st">"composite"</span>,</span>
<span>  cov1 <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  conf.int <span class="op">=</span> <span class="fl">0.95</span>,</span>
<span>  weights <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  subset <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-a">A<a class="anchor" aria-label="anchor" href="#arg-a"></a></dt>
<dd><p>Treatment indicator, 1 for treatment and 0 for control.</p></dd>


<dt id="arg-time">Time<a class="anchor" aria-label="anchor" href="#arg-time"></a></dt>
<dd><p>Time to event.</p></dd>


<dt id="arg-cstatus">cstatus<a class="anchor" aria-label="anchor" href="#arg-cstatus"></a></dt>
<dd><p>Indicator of event, 1 for the primary event, 2 for the intercurrent event, 0 for censoring.</p></dd>


<dt id="arg-strategy">strategy<a class="anchor" aria-label="anchor" href="#arg-strategy"></a></dt>
<dd><p>Strategy to address intercurrent events, <code>"treatment"</code> indicating treatment policy strategy,
<code>"composite"</code> indicating composite variable strategy, <code>"natural"</code> indicating hypothetical strategy
(Scenario I, controlling the hazard of intercurrent events), <code>"removed"</code> indicating hypothetical strategy
(Scenario II, removing intercurrent events), and <code>"whileon"</code> indicating while on treatment strategy.</p></dd>


<dt id="arg-cov-">cov1<a class="anchor" aria-label="anchor" href="#arg-cov-"></a></dt>
<dd><p>Baseline covariates.</p></dd>


<dt id="arg-conf-int">conf.int<a class="anchor" aria-label="anchor" href="#arg-conf-int"></a></dt>
<dd><p>Level of the confidence interval.</p></dd>


<dt id="arg-weights">weights<a class="anchor" aria-label="anchor" href="#arg-weights"></a></dt>
<dd><p>Weight for each subject (not applied to the while on treatment strategy).</p></dd>


<dt id="arg-subset">subset<a class="anchor" aria-label="anchor" href="#arg-subset"></a></dt>
<dd><p>Subset, either numerical or logical.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list including</p><dl><dt>logHR</dt>
<dd><p>Estimated log hazard ratio (logHR) of the treatment effect on the primary event.</p></dd>

<dt>se</dt>
<dd><p>Standard error of the estimated log hazard ratio (logHR).</p></dd>

<dt>CI</dt>
<dd><p>Confidence interval of the hazard ratio (HR).</p></dd>

<dt>p.val</dt>
<dd><p>P value of the hazard ratio.</p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>

<dl>
For the treatment policy and hypothetical strategies, the hazard ratio (HR) is given by the Cox
regression regarding intercurrent events as censoring. For the composite variable strategy, the
hazard ratio is given by the Cox regression regarding the first occurrence of either intercurrent
event or primary event as the event of interest. For the while on treatment strategy, the hazard
ratio is given by the Fine-Gray subdistribution model. There is no existing method to estimate the
hazard ratio using principal stratum strategy.
The weakness of using hazard ratio to infer treatment effects is critical. First, the hazard ratio
relies on model specification. Second, the hazard ratio is not collapsible. Therefore, the hazard
ratio should only be treated as a descriptive or exploratory measure of the treatment effect.

</dl></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">bmt</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">bmt</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/transform.html" class="external-link">transform</a></span><span class="op">(</span><span class="va">bmt</span>, d4<span class="op">=</span><span class="va">d2</span><span class="op">+</span><span class="va">d3</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">A</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">bmt</span><span class="op">$</span><span class="va">group</span><span class="op">&gt;</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## composite variable strategy</span></span></span>
<span class="r-in"><span><span class="va">fit</span> <span class="op">=</span> <span class="fu">surv.HR</span><span class="op">(</span><span class="va">A</span>, <span class="va">bmt</span><span class="op">$</span><span class="va">t2</span>, <span class="va">bmt</span><span class="op">$</span><span class="va">d4</span>, <span class="st">"composite"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## while on treatment strategy</span></span></span>
<span class="r-in"><span><span class="va">X</span> <span class="op">=</span> <span class="va">bmt</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'z1'</span>,<span class="st">'z3'</span>,<span class="st">'z5'</span><span class="op">)</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">fit</span> <span class="op">=</span> <span class="fu">surv.HR</span><span class="op">(</span><span class="va">A</span>, <span class="va">bmt</span><span class="op">$</span><span class="va">t2</span>, <span class="va">bmt</span><span class="op">$</span><span class="va">d4</span>, <span class="st">"whileon"</span>, cov1<span class="op">=</span><span class="va">X</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Yuhao Deng, Yi Zhou.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

