<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Treatment Effect Estimation for Time-to-Event Data with Intercurrent Events • tteICE</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Treatment Effect Estimation for Time-to-Event Data with Intercurrent Events">
<meta property="og:description" content="Analyzing treatment effects in clinical trials with time-to-event outcomes is complicated by intercurrent events. This package implements methods for estimating and inferring the cumulative incidence functions for time-to-event (TTE) outcomes with intercurrent events (ICE) under the five strategies outlined in the ICH E9 (R1) addendum, see Deng (2025)&lt;doi:10.1002/sim.70091&gt;. This package can be used for analyzing data from both randomized controlled trials and observational studies. In general, we have a primary outcome event and possibly an intercurrent event. Two data structures are allowed: competing risks, where only the time to the first event is recorded, and semicompeting risks, where the times to both the primary outcome event and intercurrent event (or censoring) are recorded. For estimation methods, users can choose nonparametric estimation (which does not use covariates) and semiparametrically efficient estimation.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">tteICE</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/mephas/tteICE/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="contents col-md-9">

<div class="section level1">
<div class="page-header"><h1 id="tteice-an-r-package-for-estimating-treatment-effects-on-time-to-event-outcomes-with-intercurrent-events">tteICE: An R Package for Estimating Treatment Effects on Time-to-Event Outcomes with Intercurrent Events<a class="anchor" aria-label="anchor" href="#tteice-an-r-package-for-estimating-treatment-effects-on-time-to-event-outcomes-with-intercurrent-events"></a>
</h1></div>
<ul>
<li><a href="#randomized-trials-and-observational-studies">Randomized trials and observational studies</a></li>
<li><a href="#five-strategies-to-deal-with-intercurrent-events">Five strategies to deal with intercurrent events</a></li>
<li><a href="#two-types-of-data-structures">Two types of data structures</a></li>
<li>
<a href="#about-this-package">About this package</a>
<ul>
<li><a href="#installation">Installation</a></li>
<li><a href="#example">Example</a></li>
<li><a href="#competing-risks-data-structure">Competing risks data structure</a></li>
<li><a href="#semicompeting-risks-data-structure">Semicompeting risks data structure</a></li>
<li><a href="#remarks-on-methodology">Remarks on methodology</a></li>
</ul>
</li>
</ul>
<!-- README.md is generated from README.Rmd. Please edit that file --><!-- badges: start --><!-- badges: start --><!-- `r lifecycle::badge("maturing")` -->
<!-- badges: end -->
<p>The goal of the package “tteICE” is to estimate the treatment effect for time-to-event outcomes with intercurrent events.</p>
<div class="section level2">
<h2 id="randomized-trials-and-observational-studies">Randomized trials and observational studies<a class="anchor" aria-label="anchor" href="#randomized-trials-and-observational-studies"></a>
</h2>
<p><strong>Randomized trials</strong> are the best form of experiments for evaluating the treatment effect because confounders are naturally balanced between treatment groups. The difference in outcomes between treatment groups is explained by the treatment condition. In observational studies, confounders (observed or unobserved) are not balanced. To estimate the treatment effect, we need to assume all confounders are collected. Then we may use matching, weighting, or emulating trial methods to create a sample analogue to randomized trials. Although methods for randomized trials apply to observational studies after adjusting for confounders, one should be careful in making causal conclusions based on observational studies due to the threat of unmeasured confounding.</p>
</div>
<div class="section level2">
<h2 id="five-strategies-to-deal-with-intercurrent-events">Five strategies to deal with intercurrent events<a class="anchor" aria-label="anchor" href="#five-strategies-to-deal-with-intercurrent-events"></a>
</h2>
<p><strong>The ICH E9 (R1)</strong> proposed five strategies to deal with intercurrent events: treatment policy strategy, composite variable strategy, hypothetical strategy, while on treatment strategy, and principal stratum strategy. To answer a specific scientific question, a corresponding strategy should be chosen before the experimental design and data analysis. The estimand to describe the distribution of the time to the primary outcome event is the potential cumulative incidence function (CIF). The treatment effect is defined as the contrast of the potential cumulative incidence functions under treated and control.</p>
<ul>
<li>
<strong>Treatment policy strategy.</strong> The treatment policy strategy addresses the problem of intercurrent events by expanding the initial treatment conditions to a treatment policy. This strategy is applicable only if intercurrent events do not hinder primary outcome events. It is confined to a semicompeting risks context.</li>
<li>
<strong>Composite variable strategy.</strong> The composite variable strategy addresses the problem of intercurrent events by expanding the outcome variables. It aggregates the intercurrent event and primary outcome event into a single composite outcome variable.</li>
<li>
<strong>Hypothetical strategy.</strong> The hypothetical strategy envisions a hypothetical clinical trial condition where the occurrence of intercurrent events is restricted in certain ways. By doing so, the distribution of potential outcomes under the hypothetical scenario can capture the impact of intercurrent events explicitly through a pre-specified criterion. The hypothetical strategy is closely related to mediation analysis, which is intended to evaluate the direct and indirect effects using semicompeting risks data.</li>
<li>
<strong>While on treatment strategy.</strong> The while on treatment strategy considers the measure of outcome variables taken only up to the occurrence of intercurrent events. The failures of primary outcome events should not be counted in the cumulative incidences if intercurrent events occurred. The while on treatment strategy is closely related to the competing risks model.</li>
<li>
<strong>Principal stratum strategy.</strong> The principal stratum strategy aims to stratify the population into subpopulations based on the joint potential occurrences of intercurrent events under the two treatment assignments. Usually, we are interested in a principal stratum comprised of individuals who would never experience intercurrent events, regardless of which treatment they receive. A principal ignorability assumption is made.</li>
</ul>
</div>
<div class="section level2">
<h2 id="two-types-of-data-structures">Two types of data structures<a class="anchor" aria-label="anchor" href="#two-types-of-data-structures"></a>
</h2>
<p>In particular, we consider two types of data structures.</p>
<ul>
<li>
<strong>Competing risks.</strong> Only the time to the first occurrence of either the primary outcome event or the intercurrent event is recorded. An indicator describes the type of this event, i.e., whether it is the primary outcome event, intercurrent event, or censoring. The treatment policy strategy cannot be applied to competing risks data.</li>
<li>
<strong>Semicompeting risks.</strong> Both the time to the primary outcome event and the time to the intercurrent event are recorded. The censoring indicators for these events are also recorded. All five strategies can be applied to semicompeting risks data.</li>
</ul>
<p>The composite variable strategy, while on treatment strategy, principal stratum strategy, and hypothetical strategy (II, removed) yield the same results for the competing risks and semicompeting risks data, since only the first occurrence of events is used. The hypothetical strategy (I, natural) yields different results for the competing risks and semicompeting risks data, since both cause-specific hazards of the primary event contribute to the counterfactual cumulative incidence function for semicompeting risk data.</p>
<hr>
<p>References:</p>
<p>[1] International Conference on Harmonization (2019). ICH E9 (R1): Addendum to Statistical Principles for Clinical Trials on Choosing Appropriate Estimands and Defining Sensitivity Analyses in Clinical Trials. (Step 4 version dated 20 November 2019). <a href="https://database.ich.org/sites/default/files/E9-R1_Step4_Guideline_2019_1203.pdf" class="external-link uri">https://database.ich.org/sites/default/files/E9-R1_Step4_Guideline_2019_1203.pdf</a>.</p>
<p>[2] Deng, Y., Han, S., &amp; Zhou, X. H. (2025). Inference for Cumulative Incidences and Treatment Effects in Randomized Controlled Trials With Time‐to‐Event Outcomes Under ICH E9 (R1). Statistics in Medicine. <a href="https://doi.org/10.1002/sim.70091" class="external-link uri">https://doi.org/10.1002/sim.70091</a>.</p>
<hr>
</div>
</div>
<div class="section level1">
<h1 id="about-this-package">About this package<a class="anchor" aria-label="anchor" href="#about-this-package"></a>
</h1>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of “tteICE” from GitHub with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("pak")</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pak.html" class="external-link">pak</a></span><span class="op">(</span><span class="st">"mephas/tteICE"</span><span class="op">)</span></span></code></pre></div>
<p>Alternatively, you can install “tteICE” from R CRAN with:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"tteICE"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>We use the <code>bmt</code> data to illustrate how to estimate the treatment effect. The primary event is death, and the intercurrent event is relapse.</p>
</div>
<div class="section level2">
<h2 id="competing-risks-data-structure">Competing risks data structure<a class="anchor" aria-label="anchor" href="#competing-risks-data-structure"></a>
</h2>
<p>The time to the first event (either death or relapse) is t2. The event indicator is d4=d2+d3, so that d4=1 if death occurs first, while d4=2 if relapse occurs first.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/mephas/tteICE" class="external-link">tteICE</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">bmt</span><span class="op">)</span></span>
<span><span class="va">A</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">bmt</span><span class="op">$</span><span class="va">group</span><span class="op">&gt;</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">X</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">as.matrix</a></span><span class="op">(</span><span class="va">bmt</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'z1'</span>,<span class="st">'z3'</span>,<span class="st">'z5'</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">bmt</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/transform.html" class="external-link">transform</a></span><span class="op">(</span><span class="va">bmt</span>, d4<span class="op">=</span><span class="va">d2</span><span class="op">+</span><span class="va">d3</span><span class="op">)</span></span></code></pre></div>
<p>Suppose we would like to use the hypothetical strategy (natural effects). We fit the model by nonparametric estimation.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fit1</span> <span class="op">=</span> <span class="fu"><a href="reference/surv.tteICE.html">surv.tteICE</a></span><span class="op">(</span><span class="va">A</span>, <span class="va">bmt</span><span class="op">$</span><span class="va">t2</span>, <span class="va">bmt</span><span class="op">$</span><span class="va">d4</span>, <span class="st">"natural"</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/plot_inc.html">plot_inc</a></span><span class="op">(</span><span class="va">fit1</span>, plot.configs<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>legend<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'AML'</span>,<span class="st">'ALL'</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-example_1-1.png" width="70%" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="reference/plot_ate.html">plot_ate</a></span><span class="op">(</span><span class="va">fit1</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-example_1-2.png" width="70%" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## We can also use bootstrap confidence intervals</span></span>
<span><span class="fu"><a href="reference/plot_ate.html">plot_ate</a></span><span class="op">(</span><span class="va">fit1</span>, nboot<span class="op">=</span><span class="fl">200</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-example_1-3.png" width="70%" style="display: block; margin: auto;"></p>
<p>We can also use inverse probability weighting to account for confounding.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fit2</span> <span class="op">=</span> <span class="fu"><a href="reference/surv.tteICE.html">surv.tteICE</a></span><span class="op">(</span><span class="va">A</span>, <span class="va">bmt</span><span class="op">$</span><span class="va">t2</span>, <span class="va">bmt</span><span class="op">$</span><span class="va">d4</span>, <span class="st">"natural"</span>, <span class="va">X</span>, method<span class="op">=</span><span class="st">'ipw'</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/plot_inc.html">plot_inc</a></span><span class="op">(</span><span class="va">fit2</span>, plot.configs<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>legend<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'AML'</span>,<span class="st">'ALL'</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-example_2-1.png" width="70%" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="reference/plot_ate.html">plot_ate</a></span><span class="op">(</span><span class="va">fit2</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-example_2-2.png" width="70%" style="display: block; margin: auto;"></p>
<p>To increase efficiency, we use the efficient influence function (EIF)-based method.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fit3</span> <span class="op">=</span> <span class="fu"><a href="reference/surv.tteICE.html">surv.tteICE</a></span><span class="op">(</span><span class="va">A</span>, <span class="va">bmt</span><span class="op">$</span><span class="va">t2</span>, <span class="va">bmt</span><span class="op">$</span><span class="va">d4</span>, <span class="st">"natural"</span>, <span class="va">X</span>, method<span class="op">=</span><span class="st">'eff'</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/plot_inc.html">plot_inc</a></span><span class="op">(</span><span class="va">fit3</span>, plot.configs<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>legend<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'AML'</span>,<span class="st">'ALL'</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-example_3-1.png" width="70%" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="reference/plot_ate.html">plot_ate</a></span><span class="op">(</span><span class="va">fit3</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-example_3-2.png" width="70%" style="display: block; margin: auto;"></p>
</div>
<div class="section level2">
<h2 id="semicompeting-risks-data-structure">Semicompeting risks data structure<a class="anchor" aria-label="anchor" href="#semicompeting-risks-data-structure"></a>
</h2>
<p>Note that the time to death (or censoring) is t1 and the time to relapse (or censoring) is t2. We use the hypothetical strategy (natural effects) and fit the model nonparametrically.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fit4</span> <span class="op">=</span> <span class="fu"><a href="reference/scr.tteICE.html">scr.tteICE</a></span><span class="op">(</span><span class="va">A</span>, <span class="va">bmt</span><span class="op">$</span><span class="va">t1</span>, <span class="va">bmt</span><span class="op">$</span><span class="va">d1</span>, <span class="va">bmt</span><span class="op">$</span><span class="va">t2</span>, <span class="va">bmt</span><span class="op">$</span><span class="va">d2</span>, <span class="st">"natural"</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/plot_inc.html">plot_inc</a></span><span class="op">(</span><span class="va">fit4</span>, plot.configs<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>legend<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'AML'</span>,<span class="st">'ALL'</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-example_4-1.png" width="70%" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="reference/plot_ate.html">plot_ate</a></span><span class="op">(</span><span class="va">fit4</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-example_4-2.png" width="70%" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## We can also use bootstrap confidence intervals</span></span>
<span><span class="fu"><a href="reference/plot_ate.html">plot_ate</a></span><span class="op">(</span><span class="va">fit4</span>, nboot<span class="op">=</span><span class="fl">200</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-example_4-3.png" width="70%" style="display: block; margin: auto;"></p>
<p>We can also use inverse probability weighting to account for confounding.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fit5</span> <span class="op">=</span> <span class="fu"><a href="reference/scr.tteICE.html">scr.tteICE</a></span><span class="op">(</span><span class="va">A</span>, <span class="va">bmt</span><span class="op">$</span><span class="va">t1</span>, <span class="va">bmt</span><span class="op">$</span><span class="va">d1</span>, <span class="va">bmt</span><span class="op">$</span><span class="va">t2</span>, <span class="va">bmt</span><span class="op">$</span><span class="va">d2</span>, <span class="st">"natural"</span>, <span class="va">X</span>, method<span class="op">=</span><span class="st">'ipw'</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/plot_inc.html">plot_inc</a></span><span class="op">(</span><span class="va">fit5</span>, legend<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'AML'</span>,<span class="st">'ALL'</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-example_5-1.png" width="70%" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="reference/plot_ate.html">plot_ate</a></span><span class="op">(</span><span class="va">fit5</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-example_5-2.png" width="70%" style="display: block; margin: auto;"></p>
<p>To increase efficiency, we use the efficient influence function (EIF)-based method.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fit6</span> <span class="op">=</span> <span class="fu"><a href="reference/scr.tteICE.html">scr.tteICE</a></span><span class="op">(</span><span class="va">A</span>, <span class="va">bmt</span><span class="op">$</span><span class="va">t1</span>, <span class="va">bmt</span><span class="op">$</span><span class="va">d1</span>, <span class="va">bmt</span><span class="op">$</span><span class="va">t2</span>, <span class="va">bmt</span><span class="op">$</span><span class="va">d2</span>, <span class="st">"natural"</span>, <span class="va">X</span>, method<span class="op">=</span><span class="st">'eff'</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/plot_inc.html">plot_inc</a></span><span class="op">(</span><span class="va">fit6</span>, plot.configs<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>legend<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'AML'</span>,<span class="st">'ALL'</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-example_6-1.png" width="70%" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="reference/plot_ate.html">plot_ate</a></span><span class="op">(</span><span class="va">fit6</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-example_6-2.png" width="70%" style="display: block; margin: auto;"></p>
</div>
<div class="section level2">
<h2 id="remarks-on-methodology">Remarks on methodology<a class="anchor" aria-label="anchor" href="#remarks-on-methodology"></a>
</h2>
<p>To identify the potential CIF and treatment effect, we make the following assumptions. When the semiparametrically efficient estimation method is used, these assumptions are made conditional on covariates.</p>
<ul>
<li>Stable unit treatment value assumption (SUTVA). All individuals are independent, and there is only one version of potential outcomes associated with each treatment condition.</li>
<li>Consistency. The potential time to events and event indicators associated with the realized treatment condition are observable.</li>
<li>Randomization. The treatment is independent of potential outcomes, i.e., the treatment assignment is randomized.</li>
<li>Random censoring. The potential censoring time is independent of potential event times.</li>
<li>Positivity. There is a positive probability for each individual to be treated or controlled. There is a positive probability that the censoring time is larger than the end of study.</li>
<li>Principal ignorability. The potential time to the primary outcome event does not rely on the cross-world potential time to the intercurrent event. This assumption is only required for the principal stratum strategy.</li>
</ul>
<p>The five strategies differ in the scientific questions to answer and, therefore, incorporate intercurrent events differently. The treatment policy strategy considers the effect on primary outcome events with intercurrent events as natural. Because the intercurrent event is considered part of the treatment condition, any difference in the hazards of intercurrent events between the treatment groups reflects the effect of the treatment policy. The composite variable strategy considers a composite of the primary outcome event and the intercurrent event. The while on treatment strategy estimand quantifies the total effect on the cumulative incidence of the primary outcome event, which is contributed by two sources: one is the effect of changing the hazard of primary outcome events, and the other is the effect of changing the hazard of intercurrent events. The first source is also quantified by the hypothetical strategy estimand Scenario I. The principal stratum strategy considers a subpopulation defined by potential intercurrent events, typically where such events would not occur under either treatment condition.</p>
<p>In general, the hypothetical strategy and principal stratum strategy target some direct effects, while other strategies target some total effects. Identifying direct effects requires stronger assumptions, such as sequential ignorability or principal ignorability. Under the multi-state model, let the original status, intercurrent event status, and primary outcome event status be three compartments. Then the potential CIF under the composite variable strategy is the probability of being in either state of intercurrent events or primary outcome events, whereas the potential CIF under the while on treatment strategy is the probability of being in the state of primary outcome events developed directly following the initial status. If the data are of the semi-competing risks structure, the potential CIF under the treatment policy strategy represents the probability of being in the state of primary outcome events, regardless of whether intercurrent events occur before the primary outcome events.</p>
</div>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=tteICE" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/mephas/tteICE/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/mephas/tteICE/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3" class="external-link">GPL-3</a></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing tteICE</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Yuhao Deng <br><small class="roles"> Author </small>   </li>
<li>Yi Zhou <br><small class="roles"> Maintainer </small>   </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://CRAN.R-project.org/package=tteICE" class="external-link"><img src="https://www.r-pkg.org/badges/version/tteICE" alt="CRAN status"></a></li>
<li><a href="https://github.com/mephas/tteICE/actions" class="external-link"><img src="https://img.shields.io/badge/dev_status-active-blue" alt="dev status"></a></li>
<li><a href="https://cran.r-project.org/package=tteICE" class="external-link"><img src="https://cranlogs.r-pkg.org/badges/grand-total/tteICE" alt="Total downloads"></a></li>
<li><a href="https://cran.r-project.org/package=tteICE" class="external-link"><img src="https://cranlogs.r-pkg.org/badges/last-month/tteICE" alt="Downloads last month"></a></li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Yuhao Deng, Yi Zhou.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

      </footer>
</div>






  </body>
</html>
